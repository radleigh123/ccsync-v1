import{g}from"./core-inoSP3gc.js";import{s as p}from"./sidebar-B6qmYeWP.js";import"./mockStorage-99A_-fjr.js";import"./bootstrap.esm-C8zcUHWS.js";import"./navigation-D4xvAI9A.js";import"./data-CZaJBQaZ.js";let l=null;document.addEventListener("DOMContentLoaded",async()=>{y(),p(),document.querySelector("form").addEventListener("submit",h)});async function y(){l=await g(),l||(window.location.href="/ccsync-v1/pages/auth/login.html")}document.querySelectorAll("select.form-select").forEach(e=>{function t(){e.value?e.classList.remove("placeholder-gray"):e.classList.add("placeholder-gray")}t(),e.addEventListener("change",t)});async function h(e){e.preventDefault();const t=document.getElementById("firstName").value,a=document.getElementById("lastName").value,m=document.getElementById("suffix").value,n=document.getElementById("birthDate").value,c=new Date().toISOString().split("T")[0],o=document.getElementById("idNumber").value,d=document.getElementById("email").value,s=document.getElementById("yearLevel").value,i=document.getElementById("program").value,u=document.getElementById("isPaid").checked;if(console.log(JSON.stringify({first_name:t,last_name:a,suffix:m,id_school_number:parseInt(o),email:d,birth_date:n,enrollment_date:c,program:i,year:parseInt(s),is_paid:u})),!t||!a||!n||!o||!s||!i){alert("Please fill in all required fields (First Name, Last Name, Birth Date, ID Number, Year Level, Program).");return}try{{const r=await fetch("http://localhost:8000/api/member/",{method:"POST",headers:{Authorization:`Bearer ${l.firebase_token}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({first_name:t,last_name:a,suffix:m,id_school_number:parseInt(o),email:d,birth_date:n,enrollment_date:c,program:i,year:parseInt(s),is_paid:u})});if(!r.ok){const f=await r.json();throw console.log(f),new Error(f.message||`HTTP error! Status: ${r.status}`)}}alert("Member successfully registered!"),window.location.href="/ccsync-v1/pages/home/member/view-member.html"}catch(r){console.error("Error registering member:",r),alert("Failed to register member. Please try again.");return}this.reset()}
