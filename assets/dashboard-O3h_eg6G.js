import"./styles-BPnv8btu.js";document.addEventListener("DOMContentLoaded",function(){const u=document.getElementById("sidebar-toggle"),c=document.getElementById("sidebar");document.getElementById("content-area"),localStorage.getItem("sidebar-collapsed")==="true"&&c.classList.add("collapsed"),u.addEventListener("click",function(){c.classList.toggle("collapsed"),localStorage.setItem("sidebar-collapsed",c.classList.contains("collapsed"))});const r=document.getElementById("v-pills-profile-tab"),s=document.getElementById("v-pills-profile");let i=!1;const d="/ccsync-v1/",g=d+"pages/profile/profile.html",o=d+"js/pages/profile/profile.js";if(!r||!s){console.warn("Profile tab or pane missing, lazy-load disabled.");return}async function l(){if(!i)try{const t=await fetch(g,{cache:"no-store"});if(!t.ok)throw new Error("Failed to fetch profile: "+t.status);const f=await t.text(),a=new DOMParser().parseFromString(f,"text/html"),m=a.querySelector("main")||a.querySelector(".container")||a.body;s.innerHTML=m?m.innerHTML:f;try{const n=await import(o);if(n&&typeof n.initProfile=="function")n.initProfile();else if(!document.querySelector(`script[src="${o}"]`)){const e=document.createElement("script");e.type="module",e.src=o,e.defer=!0,document.body.appendChild(e)}}catch(n){if(console.warn("Dynamic import failed, falling back to script tag:",n),!document.querySelector(`script[src="${o}"]`)){const e=document.createElement("script");e.type="module",e.src=o,e.defer=!0,document.body.appendChild(e)}}i=!0}catch(t){console.error(t),s.innerHTML='<p class="text-danger">Failed to load profile.</p>'}}r.addEventListener("click",l),r.addEventListener("shown.bs.tab",l),r.classList.contains("active")&&l();const p=document.querySelector("#v-pills-logout-tab");p&&p.addEventListener("click",t=>{t.preventDefault(),localStorage.removeItem("user"),window.location.href="/"})});
