import{a as v}from"./bootstrap.esm-C8zcUHWS.js";import{a as w}from"./navigation-Bj4Ls0Yf.js";function y(){const l=document.getElementById("toggle-btn"),c=document.getElementById("sidebar"),L=document.querySelectorAll(".dropdown-btn"),n=c.querySelectorAll("li > a, .dropdown-btn"),r=()=>window.innerWidth<=800;w();const u=Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]'));u.forEach(t=>{new v(t)});const b=c.querySelectorAll("li");function m(){u.forEach(t=>{const i=v.getInstance(t);i&&i.dispose()})}b.forEach(t=>{t.addEventListener("mouseleave",m)});function d(){c.classList.toggle("close"),l.classList.toggle("rotate"),f()}function p(t){g(t),t.nextElementSibling.classList.toggle("show"),t.classList.toggle("rotate"),c.classList.contains("close")&&(c.classList.toggle("close"),l.classList.toggle("rotate"))}function f(){Array.from(c.getElementsByClassName("show")).forEach(t=>{t.classList.remove("show"),t.previousElementSibling.classList.remove("rotate")})}function g(t){Array.from(c.getElementsByClassName("show")).forEach(i=>{i.previousElementSibling!==t&&(i.classList.remove("show"),i.previousElementSibling.classList.remove("rotate"))})}function h(t){if(n.forEach(e=>{if(e.tagName==="A")e.closest("li").classList.remove("active"),e.classList.remove("active");else{e.classList.remove("active");const s=e.querySelector("i");s&&s.classList.remove("active-icon")}}),r()&&g(t.closest(".sub-menu")?t.closest(".sub-menu").previousElementSibling:null),t.tagName==="A"){t.classList.add("active"),t.closest("li").classList.add("active");const e=t.closest(".sub-menu");if(e){e.classList.add("show");const s=e.previousElementSibling;if(s&&s.classList.contains("dropdown-btn")){s.classList.add("active"),s.classList.add("rotate");const a=s.querySelector("i");a&&a.classList.add("active-icon")}}}else{t.classList.add("active");const e=t.querySelector("i");e&&e.classList.add("active-icon")}const i=t.getAttribute("href"),o=t.textContent.trim();console.log(`Active menu item set to: ${o} (${i})`),i&&i!=="#"&&(localStorage.setItem("ccsync_active_sidebar_href",i),localStorage.setItem("ccsync_active_sidebar_text",o))}n.forEach(t=>{t.tagName==="A"&&t.addEventListener("click",i=>{const o=t.getAttribute("href");(o==="#"||!o)&&i.preventDefault(),h(t),window.innerWidth<=800&&t.closest(".sub-menu")&&f()})});function E(){const t=window.location.pathname,i=localStorage.getItem("ccsync_active_sidebar_href");let o=null;if(n.forEach(e=>{const s=e.getAttribute("href");if(s&&s!=="#"&&t===s){o=e;return}}),o||n.forEach(e=>{const s=e.getAttribute("href");s&&s!=="#"&&t.includes(s)&&(!o||s.length>o.getAttribute("href").length)&&(o=e)}),!o&&i&&n.forEach(e=>{e.getAttribute("href")===i&&(o=e)}),o||(o=c.querySelector("li > a")),o){h(o);const e=o.closest(".sub-menu");if(e){e.classList.add("show");const s=e.previousElementSibling;if(s&&s.classList.contains("dropdown-btn")){s.classList.add("active"),s.classList.add("rotate");const a=s.querySelector("i");a&&a.classList.add("active-icon")}}}}E(),l.addEventListener("click",()=>d()),L.forEach(t=>{t.addEventListener("click",()=>p(t))}),window.addEventListener("resize",()=>{window.innerWidth<1320&&!c.classList.contains("close")&&d(),window.innerWidth<800&&c.classList.contains("close")&&d()}),r()&&document.addEventListener("click",t=>{r()&&!t.target.closest(".dropdown-btn")&&!t.target.closest(".sub-menu")&&c.querySelector(".sub-menu.show")&&f()})}export{y as s};
