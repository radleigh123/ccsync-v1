<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Dashboard - CCSync</title>
	</head>
	<body>
		<!-- Mobile sidebar toggle -->
		<button class="mobile-toggle-btn d-md-none">
			<i class="bi bi-list"></i>
		</button>
		<div class="container-fluid">
			<div class="row">
				<!-- Sidebar -->
				<div class="col-auto sidebar bg-light" id="sidebar">
					<!-- Sidebar Header -->
					<div
						class="sidebar-header d-flex justify-content-center mb-3">
						<a class="navbar-brand d-flex" href="/">
							<img
								src="/assets/PSITSlogo.png"
								alt="Logo"
								class="sidebar-logo me-2" />
						</a>
						<!-- TODO: Transfer to middle-right-side -->
						<button
							hidden
							class="btn btn-sm ms-auto"
							id="sidebar-toggle">
							<i class="bi bi-chevron-left"></i>
						</button>
					</div>
					<!-- Sidebar Navigation - with scrollable wrapper -->
					<div class="sidebar-nav-wrapper">
						<nav class="nav flex-column mx-3 gap-3">
							<!-- Dashboard -->
							<div class="nav-item">
								<a
									class="nav-link justify-content-start active"
									href="#dashboard">
									<i class="bi bi-circle-fill"></i>
									<span>Dashboard</span>
								</a>
							</div>
							<!-- Member management -->
							<div class="nav-item">
								<a
									class="nav-link toggle-nav d-flex justify-content-between align-items-center"
									href="javascript:void(0)">
									<div>
										<i class="bi bi-circle-fill me-2"></i>
										<span>Member management</span>
									</div>
									<i
										class="bi bi-chevron-right nav-caret"></i>
								</a>
								<div class="sub-nav">
									<div class="sub-nav-item">
										<a
											class="nav-link"
											href="#view-members">
											View members
										</a>
									</div>
									<div class="sub-nav-item">
										<a class="nav-link" href="#add-member">
											Add member
										</a>
									</div>
								</div>
							</div>
							<!-- Event management -->
							<div class="nav-item">
								<a
									class="nav-link toggle-nav d-flex justify-content-between align-items-center"
									href="javascript:void(0)">
									<div>
										<i class="bi bi-circle-fill me-2"></i>
										<span>Event management</span>
									</div>
									<i
										class="bi bi-chevron-right nav-caret"></i>
								</a>
								<div class="sub-nav">
									<div class="sub-nav-item">
										<a class="nav-link" href="#view-events">
											View events
										</a>
									</div>
									<div class="sub-nav-item">
										<a class="nav-link" href="#add-event">
											Add event
										</a>
									</div>
								</div>
							</div>
							<!-- Requirement management -->
							<div class="nav-item">
								<a
									class="nav-link toggle-nav d-flex justify-content-between align-items-center"
									href="javascript:void(0)">
									<div>
										<i class="bi bi-circle-fill me-2"></i>
										<span>Requirement management</span>
									</div>
									<i
										class="bi bi-chevron-right nav-caret"></i>
								</a>
								<div class="sub-nav">
									<div class="sub-nav-item">
										<a
											class="nav-link"
											href="#view-requirements">
											View requirements
										</a>
									</div>
									<div class="sub-nav-item">
										<a
											class="nav-link"
											href="#add-requirements">
											Add requirements
										</a>
									</div>
								</div>
							</div>
							<!-- Officer management -->
							<div class="nav-item">
								<a
									class="nav-link toggle-nav d-flex justify-content-between align-items-center"
									href="javascript:void(0)">
									<div>
										<i class="bi bi-circle-fill me-2"></i>
										<span>Officer management</span>
									</div>
									<i
										class="bi bi-chevron-right nav-caret"></i>
								</a>
								<div class="sub-nav">
									<div class="sub-nav-item">
										<a
											class="nav-link"
											href="#view-officers">
											View officers
										</a>
									</div>
									<div class="sub-nav-item">
										<a class="nav-link" href="#add-officer">
											Add officer
										</a>
									</div>
								</div>
							</div>
						</nav>
					</div>
					<!-- User info+logout -->
					<div
						class="user-info d-flex justify-content-between align-items-center">
						<div>
							<strong>JOSHUA JAKOSALEM</strong>
							<small>4th Year Representative</small>
						</div>
						<a href="#collapse" class="collapse-btn">
							<i class="bi bi-box-arrow-in-left"></i>
						</a>
					</div>
					<!--
					<div
						class="nav flex-column nav-pills"
						id="v-pills-tab"
						aria-orientation="vertical">
						<a
							class="nav-link active mb-2"
							href="/ccsync-v1/pages/home/home.html">
							<i class="bi bi-house-fill me-2"></i>
							<span class="menu-text">Home</span>
						</a>
						<a
							class="nav-link mb-2"
							href="/ccsync-v1/pages/profile/profile.html">
							<i class="bi bi-person me-2"></i>
							<span class="menu-text">Profile</span>
						</a>
						<a
							class="nav-link mb-2"
							href="/ccsync-v1/pages/settings/settings.html">
							<i class="bi bi-gear me-2"></i>
							<span class="menu-text">Settings</span>
						</a>
						<a
							class="nav-link mb-2"
							href="/ccsync-v1/pages/admin/register-member.html">
							<i class="bi bi-gear me-2"></i>
							<span class="menu-text">Register Member</span>
						</a>
						<a id="logout-link" class="nav-link mb-2" href="#">
							<i class="bi bi-box-arrow-in-left me-2"></i>
							<span class="menu-text">Logout</span>
						</a>
					</div>
					-->
				</div>
				<div
					class="col-auto container py-4 py-xl-5 main-content-bg main-content">
					<div class="row mb-5">
						<div class="col-md-8 col-xl-6 text-center mx-auto">
							<h2>Dashboard</h2>
							<p>
								Curae hendrerit donec commodo hendrerit egestas
								tempus, turpis facilisis nostra nunc. Vestibulum
								dui eget ultrices.
							</p>
						</div>
					</div>
					<div
						class="row gy-4 row-cols-1 row-cols-md-3 row-cols-xl-3">
						<!-- Members -->
						<div class="col">
							<div class="card">
								<div
									class="card-body d-flex flex-column justify-content-between p-4">
									<div>
										<h6
											class="text-uppercase text-muted text-primary-ccsync">
											Registered Members
										</h6>
										<h4
											class="display-3 fw-bold text-center">
											956
										</h4>
										<hr />
										<div>
											<span>
												Lectus ut nibh quam, felis
												porttitor. Ante nec venenatis
												etiam lacinia.
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- Total -->
						<div class="col">
							<div class="card">
								<div
									class="card-body d-flex flex-column justify-content-between p-4">
									<div>
										<h6
											class="text-uppercase text-muted text-primary-ccsync">
											Total CSS Students
										</h6>
										<h4
											class="display-3 fw-bold text-center">
											1, 256
										</h4>
										<hr />
										<div>
											<span>
												Lectus ut nibh quam, felis
												porttitor. Ante nec venenatis
												etiam lacinia.
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- Paid -->
						<div class="col">
							<div class="card">
								<div
									class="card-body d-flex flex-column justify-content-between p-4">
									<div>
										<h6
											class="text-uppercase text-muted text-primary-ccsync">
											Paid membership
										</h6>
										<h4
											class="display-3 fw-bold text-center">
											324
										</h4>
										<hr />
										<div>
											<span>
												Lectus ut nibh quam, felis
												porttitor. Ante nec venenatis
												etiam lacinia.
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<hr class="my-5" />
					<section class="row py-xl-5">
						<div class="container">
							<div class="row mb-4">
								<div
									class="col-md-8 col-xl-6 text-center mx-auto">
									<h2>This month's events</h2>
								</div>
							</div>
							<!-- USERS LIST HERE -->
							<div class="row">
								<div class="col">
									<div
										id="userList"
										class="container-fluid px-0">
										<p class="display-5">Users List</p>
										<!-- Table will be injected here -->
									</div>
								</div>
							</div>
						</div>
						<div id="errorMsg"></div>
					</section>
				</div>
			</div>
		</div>
		<footer class="bg-light text-center py-3">
			<small>&copy; 2025 CCSync. All rights reserved.</small>
		</footer>
		<script type="module" src="/js/pages/home/home.js"></script>
		<script>
			document.addEventListener("DOMContentLoaded", function () {
				// Mobile sidebar toggle
				const mobileToggleBtn =
					document.querySelector(".mobile-toggle-btn");
				const sidebar = document.getElementById("sidebar");
				const overlay = document.querySelector(".sidebar-overlay");

				if (mobileToggleBtn) {
					mobileToggleBtn.addEventListener("click", function () {
						sidebar.classList.toggle("mobile-active");

						if (overlay) {
							overlay.classList.toggle("active");
						}
					});
				}

				// Close sidebar when clicking overlay
				if (overlay) {
					overlay.addEventListener("click", function () {
						sidebar.classList.remove("mobile-active");
						overlay.classList.remove("active");
					});
				}

				// Toggle sub-navigation
				document.querySelectorAll(".toggle-nav").forEach((item) => {
					item.addEventListener("click", function () {
						const subNav = this.nextElementSibling;

						// Toggle the open class on the parent element
						let parent = this.parentElement;
						parent.classList.toggle("open");

						// Toggle the show class on the sub-navigation
						subNav.classList.toggle("show");
					});
				});

				// Handle all navigation links
				document.querySelectorAll(".nav-link").forEach((link) => {
					link.addEventListener("click", function (e) {
						// Don't prevent default for toggle-nav links, they need to toggle
						if (!this.classList.contains("toggle-nav")) {
							e.preventDefault();
						}

						// Remove active class from all links
						document.querySelectorAll(".nav-link").forEach((l) => {
							l.classList.remove("active");
						});

						// Add active class to clicked link
						this.classList.add("active");

						// If this is a sub-nav item, also activate its parent menu
						if (this.closest(".sub-nav")) {
							const parentToggle =
								this.closest(".sub-nav").previousElementSibling;

							if (parentToggle) {
								parentToggle.classList.add("active");

								// Make sure sub-menu stays open when item is selected
								const parentItem = this.closest(".nav-item");

								if (parentItem) {
									parentItem.classList.add("open");
									this.closest(".sub-nav").classList.add(
										"show"
									);
								}
							}
						}
					});
				});

				// Initial state - check if URL hash matches any nav link and activate it
				const hash = window.location.hash;

				if (hash) {
					const targetLink = document.querySelector(
						`a.nav-link[href="${hash}"]`
					);

					if (targetLink) {
						// Simulate click to set active states properly
						targetLink.click();
					}
				}
			});
		</script>
	</body>
</html>
